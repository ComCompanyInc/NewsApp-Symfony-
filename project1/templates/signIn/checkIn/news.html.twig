{% extends 'base.html.twig' %}

{% block body %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<a href="{{ path('news') }}"> Главная </a> &emsp;
<a href="{{ path('addNews') }}"> Добавить новость </a>

    <h2>Новости:</h2>

    <style type="text/css">
        table, th, td {
            border: 1px solid black;
        }
    </style>

    {% if news %}
    <table>
        <thead>
            <tr>
               {# <th>id</th> #}
                <th>Текст</th>
                <th>Имя автора</th>
                <th>Фамилия автора</th>
                <th>Дата</th>
                <th>Подробнее</th>
            </tr>
        </thead>
        <tbody>
            {% for new in news %}
                <tr {% if idUser == new.author.id %}class="authorsRow"{% endif %}>
                   {# <td>{{ new.id }}</td> #}
                    <td>{{ new.text | slice(0,50)}}</td>
                     <td>{{ new.author.name}}</td>
                     <td>{{ new.author.Surname}}</td>
                     <td>{{ new.dateCreating | date }}</td>
                    <td>
                        <a href="{{ path('comments',{'idNews':new.id, 'idUser':idUser}) }}" > {# ссылка на переход к другой странице (с передачей в роут(URL) параметров ключей) #}
                            <h4>
                                Читать далее
                            </h4>
                        </a>
                    </td>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <h4> Новостей пока нет </h4>
{% endif %}
</body>
</html>

    <br />
    <a href="/logout"> Выйти из аккаунта </a>

    <button id="buttonHideNews">скрыть новости от автора</button>

    {# скрытие элементов по классу #}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var textElement = document.getElementsByClassName('authorsRow');

            //кнопка - покрасить текст комментария
            document.getElementById('buttonHideNews').addEventListener('click', function() {
                for(var i = 0; i < textElement.length; i++)
                    textElement[i].style.display = 'none';
            });
        });
    </script>

{% endblock %}